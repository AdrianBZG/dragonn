<!DOCTYPE html>
<html lang="en-us">
  
  <head>
  <meta charset="UTF-8">
  <title>DragoNN</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <link rel="stylesheet" href="/dragonn/css/normalize.css">
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/dragonn/css/cayman.css">

  <!-- google analytics -->
  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-79329804-1', 'auto');
      ga('send', 'pageview');
  </script>

</head>


  <body>
    <section class="page-header">
  <h1 class="project-name">DragoNN</h1>
  <h2 class="project-tagline">DragoNN provides a toolkit to learn how to model and interpret regulatory sequence data using deep learning.</h2>
  <a href="/dragonn/index.html" class="btn">Overview</a>
  <a href="/dragonn/tutorials.html" class="btn">Tutorials</a>
  <a href="/dragonn/cloud_resources.html" class="btn">Cloud Resources</a>
  <a href="/dragonn/code.html" class="btn">Code</a>
  <a href="/dragonn/documentation.html" class="btn">Documentation</a>
  <a href="/dragonn/workshops.html" class="btn">Workshops</a>
  <a href="/dragonn/paper_supplement.html" class="btn">Paper Supplement</a>
</section>



    <section class="main-content">
      
      <h1 id="overview">Overview</h1>
<p>The Dragonn software and associated tutorial can be accessed as a public image through Amazon Web Services. We recommend this option for users who 
do not have access to GPUs on their local systems, as the AWS instance will allow them to run Dragonn on a GPU. Alternativelly, users have the option to install 
Dragonn locally on their system through Anaconda.</p>

<h2 id="launching-an-amazon-aws-instance-with-dragonn">Launching an Amazon AWS instance with Dragonn</h2>

<ol>
  <li>Create an account with <a href="http://www.aws.amazon.com">Amazon AWS</a></li>


<p><img src="/dragonn/images/aws_login.png" alt="AWS login window" title="AWS Login Window" /></p>

  <li>Login to your AWS account, and set your region to <strong>US West (Oregon)</strong> or to <strong>US West (Northern California)</strong></li>


<p><img src="/dragonn/images/aws_region.png" alt="AWS Region" title="AWS Select Region" /></p>
  <li>Go to the <strong>services</strong> tab and select <strong>EC2</strong></li>

<p><img src="/dragonn/images/aws_services.png" alt="AWS Services" title="AWS Services" /></p>

  <li>On the left pane of the Web site, select <strong>AMIs</strong>, and type “dragonn” into the search bar. You should see AMI Name: <strong>Kundaje Lab Dragonn</strong> (if you are in the North California region) 
or <strong>Kundaje Lab Dragonn Oregon</strong> if you are in the Oregon region. You will not see the AMI if your region is set to anything other than these two options (see step 2).</li>

<p><img src="/dragonn/images/aws_ami.png" alt="AWS AMI" title="AWS AMI" /></p>

  <li>
    <p>Select the AMI and click <strong>Launch</strong>.</p>
  </li>
  <li>
    <p>Go through the setup tutorial  to configure your Dragonn instance, making sure to select the following options:</p>
  </li>

<p>a. In <strong>Step 2: Choose an Instance Type</strong> select <strong>g2.2xlarge</strong>.</p>

<p><img src="/dragonn/images/aws_gpuinstance.png" alt="AWS GPU Instance" title="AWS GPU Instance" /></p>

<p>b. In <strong>Step 3: Configure Instance Details</strong> use the default options.</p>

<p><img src="/dragonn/images/aws_step3.png" alt="Step 3: Configure Instance Details" title="Step 3: Configure Instance Details" /></p>

<p>c. In <strong>Step 4: Add Storage</strong> set the Size(GiB) value to 20.</p>

<p><img src="/dragonn/images/aws_step4.png" alt="Step 4: Add Storage" title="Step 4: Add Storage" /></p>

<p>d. In <strong>Step 5: Tag Instance</strong> leave the defaults (expert users may want to add tags to identify the instance uniquely).</p>

<p><img src="/dragonn/images/aws_step5.png" alt="Step 5: Tag Instance" title="Step 5: Tag Instance" /></p>

<p>e. In <strong>Step 6: Configure Security Group</strong> follow these steps:</p>

<div class="highlighter-rouge"><pre class="highlight"><code> i. Add Rule --&gt; Custom TCP Rule ; Port Range --&gt; 8443; Source --&gt; Anywhere 

 ii. Add Rule --&gt; HTTP; Port Range --&gt; 80; Source --&gt; Anywhere 

 iii. Add Rule --&gt; HTTPS; Port Range --&gt; 443; Source --&gt; Anywhere
</code></pre>
</div>

<p><img src="/dragonn/images/aws_step6.png" alt="Step 6: Configure Security Group" title="Step 6: Configure Security Group" /></p>

<p>f. In <strong>Step 7: Review and Launch</strong> leave all defaults and click <strong>Launch</strong>.</p>

<p><img src="/dragonn/images/aws_step7.png" alt="Step 7: Review and Launch" title="Step 7: Review and Launch" /></p>

<p>g. In <strong>Select an existing key pair or create a new key pair</strong> select <strong>Create a new key pair</strong>. Select a name for your key pair (such as “dragonn_keys”) and click <strong>Download Key Pair</strong>. 
     <strong>Keep the file in a safe place, you will need it to connect to your Amazon AWS instance.</strong></p>

<p><img src="/dragonn/images/aws_keypair.png" alt="Create key pair" title="Create key pair" /></p>

<li>When you launch the instance, you will arrive back at the EC2 dashboard, and you will see your new instance in the <strong>running</strong> state. Please note that the cost of running your g2.2xlarge instance 
is $0.65 per hour.</li>

<p><img src="/dragonn/images/aws_running.png" alt="Instance running" title="Instance running" /></p>

  <li>
    <p>Select your instance, and click the <strong>Connect</strong> button. You will see instructions on how to connect to your instance through ssh (If you are running Windows, you will need an SSH client such as <a href="http://www.chiark.greenend.org.uk/~sgtatham/putty/">putty</a>. Follow the instructions in the popup window to chmod your key file (see step 6g) and ssh into your instance. It is likely that you will need to ssh in as the “ubuntu” user rather than the “root” user. Modify the example command to indicate:
 <code class="highlighter-rouge">
 ssh -i 'dragonn_keys.pm' ubuntu@ec2-52-43-29-19.us-west-2.compute.amazonaws.com
</code>
 <img src="/dragonn/images/aws_connect.png" alt="Connecting to Amazon Instance" title="Connecting to Amazon Instance" /></p>
  </li>
  <li>
    <p>Once you have connected to the instance, type
      <code>
	sudo run.sh
	</code>
      </p>
  </li>
  <li>
    You will see commands similar to the following as the code pulls the latest container with the Dragonn software from Dockerhub: <img src="/dragonn/images/docker_pull.png" alt="Docker Pull",title="Docker Pull"/>
  </li>
      <li>
	The last message to show up on the screen should contain a series of characters preceded by "token=". For example:
	<img src="/dragonn/images/token.png" alt="Jupyter Authentication Token",title="Jupyter Authentication Token"/>

	In this case, the token you will need to access the software is: 9a497a929ab4ea87c0b00bedb976457d4bc7e407b20abf6c (your actual token will be different from this one).	
      </li>
  <li>
    After you have launched the juypter server, in your browser, navigate to the public ip address of your GPU instance on port 80. You can find the public ip address from the EC2 dashboard:

    <img src="/dragonn/images/aws_publicip.png" alt="Obtaining pubic IP",title="Obtaining Public IP"/>
    <img src="/dragonn/images/aws_login_browser.png" alt="Logging in",title="Logging in"/>    
  </li>  
  <li>
    Paste in the token you obtained above.
  </li>
  <li>
    Once you have logged in, you will see files associated with the dragonn software.
    <img src="/dragonn/images/aws_notebook.png" alt="Dragonn files",title="Dragonn files"/>    
  </li>
  <li>
    There are three tutorials available:
    
    a. click on paper_supplement -> primer_tutorial.ipynb to complete the tutorial referenced in the Dragonn manuscript:
    <img src="/dragonn/images/primer_tutorial.png" alt="Primer tutorial",title="Primer tutorial"/>    
    b. click on examples -> tutorial1.ipynb or examples -> tutorial2.ipynb to complete additional tutorials.    
  </li>
</ol>


<p>When you are finished with the Amazon instance, follow these steps to shutdown the instance (and avoid incurring extra usage fees):</p>

<ol>
  <li>
    <p>Navigate to the EC2 dashboard and select your Amazon instance.</p>
  </li>
  <li>
    <p>In the toolbar, select <strong>Actions</strong> –&gt; <strong>Instance State</strong> –&gt; <strong>Stop</strong></p>
  </li>
</ol>

<p><img src="/dragonn/images/aws_shutdown.png" alt="Stopping the Amazon instance" title="Stopping the Amazon instance" /></p>

<ol>
  <li>Wait for your Amazon instance to shutdown. If you want to permanently delete the Amazon instance, select <strong>Terminate</strong> (instead of <strong>Stop</strong>).</li>
</ol>


      <footer class="site-footer">
  <span class="site-footer-owner"><a href="">DragoNN</a> is maintained by <a href="https://www.linkedin.com/in/jisraeli/">Johnny Israeli</a> in the  <a href="https://github.com/kundajelab">Kundaje Lab</a>.</span>
  <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/pietromenna/jekyll-cayman-theme">Cayman theme</a> by <a href="http://github.com/jasonlong">Jason Long</a>.</span>
</footer>


    </section>

  </body>
</html>
